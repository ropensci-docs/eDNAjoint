<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate the survey effort necessary to detect species presence, given the species expected catch rate. — detectionCalculate • eDNAjoint</title><!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate the survey effort necessary to detect species presence, given the species expected catch rate. — detectionCalculate"><meta name="description" content="This function calculates the number of survey effort units to necessary
detect species presence using median estimated parameter values from
jointModel(). Detecting species presence is defined
as producing at least one true positive eDNA detection or catching at least
one individual. See more examples in the
Package
Vignette."><meta property="og:description" content="This function calculates the number of survey effort units to necessary
detect species presence using median estimated parameter values from
jointModel(). Detecting species presence is defined
as producing at least one true positive eDNA detection or catching at least
one individual. See more examples in the
Package
Vignette."><meta property="og:image" content="https://docs.ropensci.org/eDNAjoint/logo.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css"><script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">eDNAjoint</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/eDNAjoint/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate the survey effort necessary to detect species presence, given the species expected catch rate.</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/eDNAjoint/blob/master/R/detectionCalculate.R" class="external-link"><code>R/detectionCalculate.R</code></a></small>
      <div class="d-none name"><code>detectionCalculate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates the number of survey effort units to necessary
detect species presence using median estimated parameter values from
jointModel(). Detecting species presence is defined
as producing at least one true positive eDNA detection or catching at least
one individual. See more examples in the
<a href="https://bookdown.org/abigailkeller/eDNAjoint_vignette/" class="external-link">Package
Vignette</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">detectionCalculate</span><span class="op">(</span><span class="va">modelfit</span>, <span class="va">mu</span>, cov.val <span class="op">=</span> <span class="cn">NULL</span>, probability <span class="op">=</span> <span class="fl">0.9</span>, qPCR.N <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-modelfit">modelfit<a class="anchor" aria-label="anchor" href="#arg-modelfit"></a></dt>
<dd><p>An object of class <code>stanfit</code>.</p></dd>


<dt id="arg-mu">mu<a class="anchor" aria-label="anchor" href="#arg-mu"></a></dt>
<dd><p>A numeric vector of species densities/capture rates. If multiple
traditional gear types are represented in the model, mu is the catch rate
of gear type 1.</p></dd>


<dt id="arg-cov-val">cov.val<a class="anchor" aria-label="anchor" href="#arg-cov-val"></a></dt>
<dd><p>A numeric vector indicating the values of site-level
covariates to use for prediction. Default is NULL.</p></dd>


<dt id="arg-probability">probability<a class="anchor" aria-label="anchor" href="#arg-probability"></a></dt>
<dd><p>A numeric value indicating the probability of detecting
presence. The default is 0.9.</p></dd>


<dt id="arg-qpcr-n">qPCR.N<a class="anchor" aria-label="anchor" href="#arg-qpcr-n"></a></dt>
<dd><p>An integer indicating the number of qPCR replicates per eDNA
sample. The default is 3.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A summary table of survey efforts necessary to detect species
presence, given mu, for each survey type.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Before fitting the model, this function checks to ensure that the
function is possible given the inputs. These checks include:</p><ul><li><p>Input model fit is an object of class 'stanfit'.</p></li>
<li><p>Input mu is a numeric vector.</p></li>
<li><p>Input probability is a univariate numeric value.</p></li>
<li><p>If model fit contains alpha, cov.val must be provided.</p></li>
<li><p>Input cov.val is numeric.</p></li>
<li><p>Input cov.val is the same length as the number of estimated
covariates.</p></li>
<li><p>Input model fit has converged (i.e. no divergent transitions after
warm-up).</p></li>
</ul><p>If any of these checks fail, the function returns an error message.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Ex. 1: Calculating necessary effort for detection with site-level</span></span></span>
<span class="r-in"><span><span class="co"># covariates</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">gobyData</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit a model including 'Filter_time' and 'Salinity' site-level covariates</span></span></span>
<span class="r-in"><span><span class="va">fit.cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="jointModel.html">jointModel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gobyData</span>, cov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Filter_time'</span>,<span class="st">'Salinity'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      family <span class="op">=</span> <span class="st">"poisson"</span>, p10priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">20</span><span class="op">)</span>, q <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                      multicore <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SAMPLING FOR MODEL 'joint_binary_cov_pois' NOW (CHAIN 1).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Gradient evaluation took 9.3e-05 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.93 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration:    1 / 3000 [  0%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration:  500 / 3000 [ 16%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration:  501 / 3000 [ 16%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 1000 / 3000 [ 33%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 1500 / 3000 [ 50%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 2000 / 3000 [ 66%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 2500 / 3000 [ 83%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 3000 / 3000 [100%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:  Elapsed Time: 0.682 seconds (Warm-up)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:                1.727 seconds (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:                2.409 seconds (Total)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SAMPLING FOR MODEL 'joint_binary_cov_pois' NOW (CHAIN 2).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Gradient evaluation took 5e-05 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.5 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration:    1 / 3000 [  0%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration:  500 / 3000 [ 16%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration:  501 / 3000 [ 16%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 1000 / 3000 [ 33%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 1500 / 3000 [ 50%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 2000 / 3000 [ 66%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 2500 / 3000 [ 83%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 3000 / 3000 [100%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2:  Elapsed Time: 0.869 seconds (Warm-up)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2:                1.733 seconds (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2:                2.602 seconds (Total)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SAMPLING FOR MODEL 'joint_binary_cov_pois' NOW (CHAIN 3).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Gradient evaluation took 5e-05 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.5 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration:    1 / 3000 [  0%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration:  500 / 3000 [ 16%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration:  501 / 3000 [ 16%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 1000 / 3000 [ 33%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 1500 / 3000 [ 50%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 2000 / 3000 [ 66%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 2500 / 3000 [ 83%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 3000 / 3000 [100%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3:  Elapsed Time: 0.933 seconds (Warm-up)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3:                1.741 seconds (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3:                2.674 seconds (Total)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SAMPLING FOR MODEL 'joint_binary_cov_pois' NOW (CHAIN 4).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Gradient evaluation took 5e-05 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.5 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration:    1 / 3000 [  0%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration:  500 / 3000 [ 16%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration:  501 / 3000 [ 16%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 1000 / 3000 [ 33%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 1500 / 3000 [ 50%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 2000 / 3000 [ 66%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 2500 / 3000 [ 83%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 3000 / 3000 [100%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4:  Elapsed Time: 0.655 seconds (Warm-up)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4:                1.726 seconds (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4:                2.381 seconds (Total)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Refer to the eDNAjoint guide for visualization tips:  https://ednajoint.netlify.app/tips#visualization-tips </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate at the mean covariate values</span></span></span>
<span class="r-in"><span><span class="co"># (covariates are standardized, so mean = 0)</span></span></span>
<span class="r-in"><span><span class="fu">detectionCalculate</span><span class="op">(</span><span class="va">fit.cov</span><span class="op">$</span><span class="va">model</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.1</span>, to <span class="op">=</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   cov.val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>, qPCR.N <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        mu n_traditional n_eDNA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,] 0.1            24     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,] 0.2            12      7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,] 0.3             8      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] 0.4             6      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,] 0.5             5      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] 0.6             4      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] 0.7             4      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,] 0.8             3      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] 0.9             3      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,] 1.0             3      2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate mu_critical at salinity 0.5 z-scores greater than the mean</span></span></span>
<span class="r-in"><span><span class="fu">detectionCalculate</span><span class="op">(</span><span class="va">fit.cov</span><span class="op">$</span><span class="va">model</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.1</span>, to <span class="op">=</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   cov.val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.5</span><span class="op">)</span>, qPCR.N <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        mu n_traditional n_eDNA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,] 0.1            24     12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,] 0.2            12      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,] 0.3             8      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] 0.4             6      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,] 0.5             5      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] 0.6             4      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] 0.7             4      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,] 0.8             3      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] 0.9             3      2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,] 1.0             3      2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Ex. 2: Calculating necessary effort for detection with multiple traditional</span></span></span>
<span class="r-in"><span><span class="co"># gear types</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">greencrabData</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fit a model with no site-level covariates</span></span></span>
<span class="r-in"><span><span class="va">fit.q</span> <span class="op">&lt;-</span> <span class="fu"><a href="jointModel.html">jointModel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">greencrabData</span>, cov <span class="op">=</span> <span class="cn">NULL</span>, family <span class="op">=</span> <span class="st">"negbin"</span>,</span></span>
<span class="r-in"><span>                    p10priors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">20</span><span class="op">)</span>, q <span class="op">=</span> <span class="cn">TRUE</span>, multicore <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SAMPLING FOR MODEL 'joint_binary_catchability_negbin' NOW (CHAIN 1).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Gradient evaluation took 0.000366 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 3.66 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration:    1 / 3000 [  0%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration:  500 / 3000 [ 16%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration:  501 / 3000 [ 16%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 1000 / 3000 [ 33%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 1500 / 3000 [ 50%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 2000 / 3000 [ 66%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 2500 / 3000 [ 83%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: Iteration: 3000 / 3000 [100%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:  Elapsed Time: 3.441 seconds (Warm-up)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:                11.336 seconds (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1:                14.777 seconds (Total)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 1: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SAMPLING FOR MODEL 'joint_binary_catchability_negbin' NOW (CHAIN 2).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Gradient evaluation took 0.000284 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 2.84 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration:    1 / 3000 [  0%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration:  500 / 3000 [ 16%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration:  501 / 3000 [ 16%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 1000 / 3000 [ 33%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 1500 / 3000 [ 50%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 2000 / 3000 [ 66%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 2500 / 3000 [ 83%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: Iteration: 3000 / 3000 [100%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2:  Elapsed Time: 3.654 seconds (Warm-up)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2:                11.385 seconds (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2:                15.039 seconds (Total)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 2: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SAMPLING FOR MODEL 'joint_binary_catchability_negbin' NOW (CHAIN 3).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Gradient evaluation took 0.000297 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 2.97 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration:    1 / 3000 [  0%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration:  500 / 3000 [ 16%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration:  501 / 3000 [ 16%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 1000 / 3000 [ 33%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 1500 / 3000 [ 50%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 2000 / 3000 [ 66%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 2500 / 3000 [ 83%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: Iteration: 3000 / 3000 [100%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3:  Elapsed Time: 3.189 seconds (Warm-up)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3:                10.934 seconds (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3:                14.123 seconds (Total)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 3: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SAMPLING FOR MODEL 'joint_binary_catchability_negbin' NOW (CHAIN 4).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Gradient evaluation took 0.00028 seconds</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 2.8 seconds.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Adjust your expectations accordingly!</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration:    1 / 3000 [  0%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration:  500 / 3000 [ 16%]  (Warmup)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration:  501 / 3000 [ 16%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 1000 / 3000 [ 33%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 1500 / 3000 [ 50%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 2000 / 3000 [ 66%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 2500 / 3000 [ 83%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: Iteration: 3000 / 3000 [100%]  (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4:  Elapsed Time: 3.441 seconds (Warm-up)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4:                10.21 seconds (Sampling)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4:                13.651 seconds (Total)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chain 4: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Refer to the eDNAjoint guide for visualization tips:  https://ednajoint.netlify.app/tips#visualization-tips </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate</span></span></span>
<span class="r-in"><span><span class="fu">detectionCalculate</span><span class="op">(</span><span class="va">fit.q</span><span class="op">$</span><span class="va">model</span>, mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0.1</span>, to <span class="op">=</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   cov.val <span class="op">=</span> <span class="cn">NULL</span>, qPCR.N <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        mu n_traditional_1 n_traditional_2 n_eDNA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,] 0.1              25              31     28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,] 0.2              13              16     14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,] 0.3               9              11     10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] 0.4               7               9      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,] 0.5               6               8      6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] 0.6               5               7      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] 0.7               5               6      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,] 0.8               5               5      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] 0.9               4               5      4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10,] 1.0               4               5      4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Change probability of detecting presence to 0.95</span></span></span>
<span class="r-in"><span><span class="fu">detectionCalculate</span><span class="op">(</span><span class="va">fit.q</span><span class="op">$</span><span class="va">model</span>, mu <span class="op">=</span> <span class="fl">0.1</span>, cov.val <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                   probability <span class="op">=</span> <span class="fl">0.95</span>, qPCR.N <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       mu n_traditional_1 n_traditional_2 n_eDNA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 0.1              32              40     36</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>





  </body></html>

